

# Smart Watch Project
I am utilizing ESP32 Pico as well as several provided components including: IR Transmitter/receiver, an LED, Buzzer, two buttons, as well as an LCD screen. This enables me to customize the ESP32 Pico to act as a mini computer which can fit on my wrist. With proper coding, I am able to turn the ESP32 Pico into a functioning Smartwatch with several features. In addition, I decided to build a Bicycle Generator. This second project allows me to harvest electricity from the motion of the wheel which turns as power is generated from my legs.

| **Engineer** | **School** | **Area of Interest** | **Grade** |
|:--:|:--:|:--:|:--:|
| Rushil R | Los Altos High School | Computer Science & Engineering| Rising Junior

![Headstone Image](logo.svg)
<!--
# Reflection
My time at BlueStamp was both fun and extremely informative. I learned so many new things from what a Rasperry Pi is and to how to use an API. Although I did not get to finish everything that I had planned for my Smart Mirror project, I learned so much and I'm very proud of what I was able to make in just three weeks. I really value all the lessons I learned this summer and I know that I will be using them again in the future. If you scroll below, you can see my journey working on this project and how I was able to tackle the problems I ran into. 

# Smart Mirror Monitor  
Final Design
<html>
<img src="IMG-7354.JPG">
</html>

Base Code Design
<html>
<img src="IMG-5785.JPG">
</html>


# Final Milestone
I reached my final milestone! My goal for this milestone was to format all the components on the screen in a visually aesthetic way, following the sketch I had previously made, and glue the physical peices of the mirror together. I was able to experiment with colors, fonts, and sizes until I was finally satisfied with how it looked. Unfortunately, I was not able to glue the mirror onto the monitor before my 3 weeks at BlueStamp was over. However, I am planning to finish that up and work on some additional components for my smart mirror as well. The components I want to add are the music player and text notification. With all the knowledge I gained at BlueStamp, I feel confident in my ability to keep improving the smart mirror. In the video below, I will be presenting my Smart Mirror, explaining my journey working on this project, and talking about this final milestone. Thank you so much for following me on this journey!

[![Demo Night Vid](https://res.cloudinary.com/marcomontalbano/image/upload/v1628289700/video_to_markdown/images/youtube--_TTp9rQcXJg-c05b58ac6eb4c4700831b2b3070cd403.jpg)](https://www.youtube.com/watch?v=_TTp9rQcXJg&t=4s "Demo Night Vid")


# Second Milestone

I reached my second milestone today! I finished working on the software and writing the code on Visual Studio Code. I have made the components for the time/date, todo list, and photo album, but because of time constraints, I am not going to be making the music player and text notifications components. If I have extra time after finishing my third milestone, I will add the music component. Writing the todo list code was the most difficult because I had to connect the API to my google calendar. However, the other two, time/date and photo album, were much easier. The layout of the monitor is similar to my sketch, and I am ready to place all of my parts together and finish my third milestone soon.



[![Milestone 2 Video](https://res.cloudinary.com/marcomontalbano/image/upload/v1628289614/video_to_markdown/images/youtube--0PfWPwV4eSk-c05b58ac6eb4c4700831b2b3070cd403.jpg)](https://www.youtube.com/watch?v=0PfWPwV4eSk "Milestone 2 Video")-->
# Third Milestone 

3D Views: 
<html>
<img src="Screenshot 2023-06-27 094552.jpg">
</html>
<html>
<img src="rightViewofBrace.jpg">
</html>
<html>
<img src="Front View.jpg">
</html>
Demonstration:
<iframe width="560" height="315" src="https://www.youtube.com/embed/kqAD4AKiqZA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

Milestone III Video:

<iframe width="560" height="315" src="https://www.youtube.com/embed/jhJolwuPPM4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

I reached my Third Milestone today. After deciding to utilize much more hardware with my time at Bluestamp, I proposed creating a bike generator to Claudia. This milestone of my project entails actually generating power from the bike. I accomplished this by attaching two motors to a brace which takes power directly from the wheel. I also implemented four holes which allow the brace to be attached directly using zip ties. Highest power output is 1.4V. 




# Second Milestone

Milestone II Video:

<iframe width="560" height="315" src="https://www.youtube.com/embed/vNwp13OvMRc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

Picture of Arduino Contraption
<html>
<img src="PXL_20230619_211753634.MP.jpg">
</html>


I reached my second milestone today! This milestone was marked by the completion of a couple of steps that are crucial to the development of a smartwatch, as well as some auxiliary features. Firstly, I developed a multiscreen capability within the watch, enabling the user to switch screens with the push of a button. This functionality enabled me to add a home screen to my watch, which included items necessary for a watch, such as date and time. To test this, I created a simple Arduino Infared detection machine. I have added a video of this functionality working below, as well as a picture of the Arduino contraption. Finally, I added an auxiliary feature which is awesome with watches, a built-in TV Remote. In the next milestone, I want to add a step counter, as it is a feature I enjoyed with my old FitBit.


# First Milestone

Milestone I Video:
<iframe width="560" height="315" src="https://www.youtube.com/embed/CIY-Y0Lh2Yk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

In-depth picture:
<html>
<img src="PXL_20230615_155954206.MP.jpg">
</html>

I have reached my first milestone! This milestone involved the creation of my first ever screen on the smartwatch, a simple stopwatch. Before reaching this milestone, I had to set up the M5Stick Plus with an ESP32 Pico Kit installed. I first had to burn the ESP32 Pico, which enabled me to connect it to the wifi and the UIFlow Interface. This allowed me to code the stopwatch. In this stopwatch, we have three functions: Restart, Start, and Stop. Through the different types of button presses, I was able to code all of those three functions to one singular button on the Stick C. First, a singular press either Starts/Stops it depending on if the stopwatch is currently counting or not. Secondly, a longer press restarts the stopwatch to 0. Overall, I am proud of how far I have come in terms of being knowledgeable about how to code the M5Stick




# Starter Project

<iframe width="560" height="315" src="https://www.youtube.com/embed/pBVsiNEepwE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

I finished my starter project! This project involved building an alarm clock from the basic instructions and materials provided. This project involved a lot of soldering as many of the components needed to be soldered onto the PCB in order for it to work. I found building this alarm clock to be extremely fun, as it was a big relief once it worked on the first attempt. I also found it interesting how each part has a function, and even the smallest parts can contribute mainly to the final functionality. As this was my first time soldering for a project, I am incredibly proud of myself for finishing the project with a high degree of quality.


# Code

```
from m5stack import *
from m5ui import *
from uiflow import *
import ntptime
from easyIO import *
import time
import unit


setScreenColor(0x000000)
gps_0 = unit.get(unit.GPS, unit.PORTA)


total = None
accX = None
Screen = None
accY = None
accZ = None
acceleration = None
stoppedTimer = None
average = None
Hours = None
count = None
width = None
state = None
Minutes = None
oldState = None
Steps = None
Seconds = None
currMilli = None



triangle0 = M5Triangle(65, 90, 41, 115, 92, 115, 0xFFFFFF, 0xFFFFFF)
currentTime = M5TextBox(78, 54, "00:00", lcd.FONT_DejaVu24, 0xFFFFFF, rotate=90)
triangle1 = M5Triangle(65, 50, 40, 75, 91, 75, 0xFFFFFF, 0xFFFFFF)
triangle2 = M5Triangle(65, 7, 39, 32, 90, 32, 0xFFFFFF, 0xFFFFFF)
battery = M5TextBox(130, 200, "label0", lcd.FONT_Default, 0xffffff, rotate=90)
label0 = M5TextBox(130, 0, "label0", lcd.FONT_DejaVu40, 0xFFFFFF, rotate=90)
Step = M5TextBox(100, 75, "0", lcd.FONT_DejaVu72, 0xFFFFFF, rotate=90)
label1 = M5TextBox(41, 92, "label1", lcd.FONT_DejaVu24, 0xFFFFFF, rotate=90)

from numbers import Number


# Describe this function...
def renderStopwatch():
  global total, accX, Screen, accY, accZ, acceleration, stoppedTimer, average, Hours, count, width, state, Minutes, oldState, Steps, Seconds, currMilli
  lcd.clear()
  lcd.fill(0x000000)
  loadBattery()
  circle0 = M5Circle(55, 70, 6, 0xFFFFFF, 0xFFFFFF)
  circle1 = M5Circle(85, 70, 6, 0xFFFFFF, 0xFFFFFF)
  circle2 = M5Circle(55, 150, 6, 0xFFFFFF, 0xFFFFFF)
  circle3 = M5Circle(85, 150, 6, 0xFFFFFF, 0xFFFFFF)

  Hour = M5TextBox(90, 13, "00", lcd.FONT_DejaVu40, 0xFFFFFF, rotate=90)
  Minute = M5TextBox(90, 92, "00", lcd.FONT_DejaVu40, 0xFFFFFF, rotate=90)
  Second = M5TextBox(90, 173, "00", lcd.FONT_DejaVu40, 0xffffff, rotate=90)


  stoppedTimer = True
  Hours = 0
  Minutes = 0
  Seconds = 0
  currMilli = 0
  while Screen == 1:
    wait(0.1)
    currMilli = (currMilli if isinstance(currMilli, Number) else 0) + 0.1
    if btnA.isPressed():
      homePressed()
      break
    else:
      if btnB.isPressed():
        wait(0.01)
        if stoppedTimer == True:
          stoppedTimer = False
        else:
          stoppedTimer = True
      if Seconds >= 59:
        Minutes = (Minutes if isinstance(Minutes, Number) else 0) + 1
        Seconds = -1
        if Minutes >= 59:
          Hours = (Hours if isinstance(Hours, Number) else 0) + 1
          Minutes = 0
          if Hours >= 24:
            Hours = 0
            Minutes = 0
            Seconds = 0
      if stoppedTimer == False:
        if currMilli >= 1:
          Seconds = (Seconds if isinstance(Seconds, Number) else 0) + 1
          currMilli = 0
      Hour.setText(str("{0:0=2d}".format(Hours)))
      Minute.setText(str("{0:0=2d}".format(Minutes)))
      Second.setText(str("{0:0=2d}".format(Seconds)))

# Describe this function...
def renderTVRemote():
  global total, accX, Screen, accY, accZ, acceleration, stoppedTimer, average, Hours, count, width, state, Minutes, oldState, Steps, Seconds, currMilli
  lcd.clear()
  lcd.fill(0x000000)
  loadBattery()
  while Screen == 3:
    if btnB.isPressed():
      M5Led.on()
      triangle0.setBgColor(0xff0000)
      wait_ms(100)
      triangle1.setBgColor(0xff0000)
      wait_ms(100)
      triangle2.setBgColor(0xff0000)
      irCodes= [19, 618, 644 , 56, 60, 587 , 37, 178, 30, 556, 9, 702, 774, 93, 217, 448]
      for i in range(len(irCodes)):
        ir.tx(0xE0E040BF, irCodes[i])
      triangle2.setBgColor(0x000000)
      wait_ms(100)
      triangle1.setBgColor(0x000000)
      wait_ms(100)
      triangle0.setBgColor(0x000000)
      M5Led.off()
    else:
      wait_ms(100)
      if btnA.isPressed():
        homePressed()
        break

# Describe this function...
def loadBattery():
  global total, accX, Screen, accY, accZ, acceleration, stoppedTimer, average, Hours, count, width, state, Minutes, oldState, Steps, Seconds, currMilli
  battery.setColor(0xffffff)
  battery.setText(str(map_value((axp.getBatVoltage()), 3.7, 4.1, 0, 100)))

# Describe this function...
def renderHome():
  global total, accX, Screen, accY, accZ, acceleration, stoppedTimer, average, Hours, count, width, state, Minutes, oldState, Steps, Seconds, currMilli
  lcd.clear()
  lcd.fill(0x000000)
  loadBattery()
  currentTime.setColor(0xffffff)
  label0.setColor(0xffffff)
  label1.setColor(0xffffff)
  label0.setText(str(ntp.weekday()))
  label1.setText(str(ntp.formatDate('-')))
  currentTime.setText(str(ntp.formatTime(':')))
  while Screen == 2:
    if btnA.isPressed():
      homePressed()
      break
    else:
      currentTime.setText(str(ntp.formatTime(':')))

# Describe this function...
def renderStepCounter():
  global total, accX, Screen, accY, accZ, acceleration, stoppedTimer, average, Hours, count, width, state, Minutes, oldState, Steps, Seconds, currMilli
  lcd.clear()
  lcd.fill(0x000000)
  Step.setColor(0xffffff)
  loadBattery()
  while Screen == 4:
    label0.setText('Speed')
    Step.setText(str(gps_0.speed_kph))
    wait(0.1)
    if btnA.isPressed():
      homePressed()
      break

# Describe this function...
def homePressed():
  global total, accX, Screen, accY, accZ, acceleration, stoppedTimer, average, Hours, count, width, state, Minutes, oldState, Steps, Seconds, currMilli
  Screen = (Screen if isinstance(Screen, Number) else 0) + 1
  if Screen == 1:
    renderStopwatch()
  if Screen == 2:
    renderHome()
  if Screen == 3:
    renderTVRemote()
  if Screen == 4:
    renderStepCounter()
  if Screen > 4:
    Screen = 1
    renderStopwatch()



ntp = ntptime.client(host='us.pool.ntp.org', timezone=(-7))
loadBattery()
Screen = 2
renderHome()
average = 1.1
count = average / 10
oldState = False
state = False
```

# Bill of Materials

| **Part** | **Note** | **Price** | **Link** |
|:--:|:--:|:--:|:--:|
| MStick C Plus| Act as actual computer for the smart watch | $19.95 | <a href="https://shop.m5stack.com/products/m5stickc-plus-esp32-pico-mini-iot-development-kit"> Link </a> |
| GPS | Enable GPS Capability for the MStick C Plus | $11.95 | <a href="https://docs.m5stack.com/en/core/m5stickc_plus"> Link <\a>|
| Item Name | What the item is used for | $Price | <a href="https://www.amazon.com/Arduino-A000066-ARDUINO-UNO-R3/dp/B008GRTSV6/"> Link </a> |

